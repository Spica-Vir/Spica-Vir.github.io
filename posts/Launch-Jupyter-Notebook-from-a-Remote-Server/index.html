<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Set Up a Remote Jupyter Server" /><meta property="og:locale" content="en" /><meta name="description" content="In this post the method to launch the Jupyter service remotely is introduced, i.e., set up a remote Jupyter server. Note that is different from setting up a remote desktop connection, where the image on the monitor is transferred in real-time and a higher data stream is required. In the current case, the remote server is set as a ‘Jupyter Notebook server’, so the notebook app is launched locally in the browser, but the user can still have access to the environments and files on the remote server. Updated tests on Windows 10, NHPC101 and ARCHER2, Mar. 09, 23. Revised on Feb. 25, 24." /><meta property="og:description" content="In this post the method to launch the Jupyter service remotely is introduced, i.e., set up a remote Jupyter server. Note that is different from setting up a remote desktop connection, where the image on the monitor is transferred in real-time and a higher data stream is required. In the current case, the remote server is set as a ‘Jupyter Notebook server’, so the notebook app is launched locally in the browser, but the user can still have access to the environments and files on the remote server. Updated tests on Windows 10, NHPC101 and ARCHER2, Mar. 09, 23. Revised on Feb. 25, 24." /><link rel="canonical" href="https://spica-vir.github.io/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/" /><meta property="og:url" content="https://spica-vir.github.io/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/" /><meta property="og:site_name" content="Spica. Vir" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-10T18:11:07+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Set Up a Remote Jupyter Server" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-04-20T21:53:38+01:00","datePublished":"2022-08-10T18:11:07+01:00","description":"In this post the method to launch the Jupyter service remotely is introduced, i.e., set up a remote Jupyter server. Note that is different from setting up a remote desktop connection, where the image on the monitor is transferred in real-time and a higher data stream is required. In the current case, the remote server is set as a ‘Jupyter Notebook server’, so the notebook app is launched locally in the browser, but the user can still have access to the environments and files on the remote server. Updated tests on Windows 10, NHPC101 and ARCHER2, Mar. 09, 23. Revised on Feb. 25, 24.","headline":"Set Up a Remote Jupyter Server","mainEntityOfPage":{"@type":"WebPage","@id":"https://spica-vir.github.io/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/"},"url":"https://spica-vir.github.io/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/"}</script><title>Set Up a Remote Jupyter Server | Spica. Vir</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Spica. Vir"><meta name="application-name" content="Spica. Vir"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://cdn.jsdelivr.net/gh/spica-vir/spica-vir.github.io/images//avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Spica. Vir</a></div><div class="site-subtitle font-italic">Research, techniques and interests</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Spica-Vir" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="" aria-label="" target="_blank" rel="noopener"> <i class=""></i> </a> <a href=" javascript:location.href = 'mailto:' + ['spica.h.zhou','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="" aria-label="" target="_blank" rel="noopener"> <i class=""></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Set Up a Remote Jupyter Server</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Set Up a Remote Jupyter Server</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/Spica-Vir">Spica.Vir</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-08-10 18:11:07 +0100" data-toggle="tooltip" data-placement="bottom" title="Wed, Aug 10, 2022, 6:11 PM +0100" >Aug 10, 2022</em> </span> <span> Updated <em class="timeago" date="2024-04-20 21:53:38 +0100 " data-toggle="tooltip" data-placement="bottom" title="Sat, Apr 20, 2024, 9:53 PM +0100" >Apr 20</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1518 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><p>In this post the method to launch the Jupyter service remotely is introduced, i.e., set up a remote Jupyter server. Note that is different from setting up a remote desktop connection, where the image on the monitor is transferred in real-time and a higher data stream is required. In the current case, the remote server is set as a ‘Jupyter Notebook server’, so the notebook app is launched locally in the browser, but the user can still have access to the environments and files on the remote server. Updated tests on Windows 10, NHPC101 and ARCHER2, Mar. 09, 23. Revised on Feb. 25, 24.</p><h1 id="project-jupyter">Project Jupyter</h1><p><a href="https://en.wikipedia.org/wiki/Project_Jupyter">Project Jupyter</a> is an open-source, cross-platform programming environment which provides hierarchical services for multiple programming languages (with the optimal support to python and R, of course). To deploy Jupyter service framework on a server, Jupyter Core and Jupyter Server are needed.</p><p><strong>Jupyter Core</strong> and <a href="https://jupyter-server.readthedocs.io/en/latest/operators/public-server.html"><strong>Jupyter Server</strong></a> cannot do any specific job except providing interactive programming environment and establishing communications to specific applications. When the server is launched, its configuration file is applied to other applications, unless a specific configuration file is defined elsewhere for that specific application.</p><p><strong>Jupyter Notebook</strong> provides an interactive programming environment by calling the corresponding kernel and a basic file explorer. Markdown and Latex equations are provided as well, making it is useful for writing a script or developing a workflow. <strong>Jupyter Lab</strong> provides a more comprehensive integrated developing environment (IDE) for a single user, including Notebook, console, terminal, file explorer and text editor. Obvious advantages of Jupyter Lab include light-weight, highly extendable and customizable. The thing that I am not pretty happy with is that it, so far, has poor support of <code class="language-plaintext highlighter-rouge">ssh</code> and <code class="language-plaintext highlighter-rouge">http</code>, and prohibits downloading folders. <strong>Jupyter Hub</strong> manages IDE for multiple users. It can both deploy users’ local environment set-ups and provide the default environment for all users. It is also the recommended way to call <a href="https://icl-rcs-user-guide.readthedocs.io/en/latest/hpc/applications/guides/jupyter/">Jupyter Services on Imperial RCS</a>.</p><p>Jupyter Hub is set in this post for personal use.</p><h1 id="configure-jupyter-server">Configure Jupyter Server</h1><p>The recommended way to install Jupyter services is using <code class="language-plaintext highlighter-rouge">conda</code> package and environment manager, such as <a href="https://www.anaconda.com/">Anaconda</a> or <a href="https://mamba.readthedocs.io/en/latest/">Mamba</a>. The essentials of Jupyter Hub and Server is suggested to be installed in the ‘base’ (default) environment, while the interpreter and compiler of programming languages are installed in individual environments. This avoids potential conflicts in dependencies and the (in)famous <a href="https://stackoverflow.com/questions/63734508/stuck-at-solving-environment-on-anaconda">‘Solving Environment’ issue</a> of conda. The following command installs Jupyter Core, Server, Lab, Notebook from the channel ‘conda-forge’ (as suggested):</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>conda <span class="nb">install </span>jupyter <span class="nt">-c</span> conda-forge
</pre></table></code></div></div><h2 id="generate-a-configuration-file">Generate a configuration file<a href="#generate-a-configuration-file" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>A configuration file for Server is needed, which is not automatically generated when graphical user interface is not available, such as when setting up the server on clusters. To generate the configuration file, use the following command:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>jupyter server <span class="nt">--generate-config</span>
</pre></table></code></div></div><p>Then by default, the file is generated as <code class="language-plaintext highlighter-rouge">${HOME}/.jupyter/jupyter_server_config.py</code>. Refer to the messages in command line.</p><h2 id="generate-password">Generate password<a href="#generate-password" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>A password is (by default) needed for servers. There are 2 ways to generate the password:</p><ol><li>Automatic generation: By default, the hashed password can be found in <code class="language-plaintext highlighter-rouge">${HOME}/.jupyter/jupyter_server_config.json</code>.</ol><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>jupyter server password
</pre></table></code></div></div><ol><li>Manually generate a hashed password. Launch the conda environment that requires a Jupyter Server. In command line, type <code class="language-plaintext highlighter-rouge">python3</code> to enter the interactive python environment, then:</ol><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">notebook.auth</span> <span class="kn">import</span> <span class="n">passwd</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">passwd</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">exit</span><span class="p">()</span>
</pre></table></code></div></div><p>Then copy the generated token, the one with single quotes.</p><h2 id="edit-configuration-file">Edit configuration file<a href="#edit-configuration-file" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Open the configuration file <code class="language-plaintext highlighter-rouge">${HOME}/.jupyter/jupyter_server_config.py</code>. Find and uncomment the following options:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">c</span><span class="p">.</span><span class="n">ServerApp</span><span class="p">.</span><span class="n">allow_password_change</span> <span class="o">=</span> <span class="bp">True</span> <span class="c1"># Allow the password to be changed at login for the Jupyter server
</span><span class="n">c</span><span class="p">.</span><span class="n">ServerApp</span><span class="p">.</span><span class="n">allow_remote_access</span> <span class="o">=</span> <span class="bp">True</span> <span class="c1"># Allow remote access to the server
</span><span class="n">c</span><span class="p">.</span><span class="n">ServerApp</span><span class="p">.</span><span class="n">ip</span> <span class="o">=</span> <span class="s">'*'</span> <span class="c1"># Viable for all ip addresses
</span><span class="n">c</span><span class="p">.</span><span class="n">ServerApp</span><span class="p">.</span><span class="n">password</span> <span class="o">=</span> <span class="sa">u</span><span class="s">'argon2:$argon2id$v=......'</span> <span class="c1"># The hashed password
</span><span class="n">c</span><span class="p">.</span><span class="n">ServerApp</span><span class="p">.</span><span class="n">password_required</span> <span class="o">=</span> <span class="bp">False</span> <span class="c1"># If you do not want to enter password everytime you login
</span><span class="n">c</span><span class="p">.</span><span class="n">ServerApp</span><span class="p">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">1008</span> <span class="c1"># Port number, can be any number, as long as it is unoccupied.
</span><span class="n">c</span><span class="p">.</span><span class="n">ServerApp</span><span class="p">.</span><span class="n">root_dir</span> <span class="o">=</span> <span class="s">'/home/username'</span> <span class="c1"># Root directory of Jupyter Server, the directory from which the Jupyter service starts
</span></pre></table></code></div></div><p>If you are sure that you will not use graphic interface of the server, you can set <code class="language-plaintext highlighter-rouge">--no-browser</code> as the default option in the configuration file to prevent the server to launch the browser locally:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">c</span><span class="p">.</span><span class="n">ServerApp</span><span class="p">.</span><span class="n">open_browser</span> <span class="o">=</span> <span class="bp">False</span>
</pre></table></code></div></div><p>In practice, it is found that leaving the hashed password in <code class="language-plaintext highlighter-rouge">jupyter_server_config.json</code> will lead to invalid token error for the first-time login. So it is strongly recommended to copy the hashed password into the configuration file however the user generated it. And the user should be noted that for the first-time login, the password is required even though <code class="language-plaintext highlighter-rouge">c.ServerApp.password_required = False</code>.</p><p>For the port number, if you are not sure whether it is occupied by other processes, after the file is configured, in command line, type <code class="language-plaintext highlighter-rouge">jupyter server</code> and check messages on the screen for the available port number. It is suggested to update the <code class="language-plaintext highlighter-rouge">c.NotebookApp.port</code> value to avoid future tests.</p><h1 id="setup-environments">Setup environments</h1><p>As mentioned before, the actual programming environment is suggested to be isolated from Jupyter Service and other programming environments. After installing the packages from <code class="language-plaintext highlighter-rouge">conda</code> in a new environment, the kernel should be added to Jupyter in ‘base’ environment. Here lists some programming environments that I used.</p><p>Useful commends</p><ul><li><code class="language-plaintext highlighter-rouge">conda create -n &lt;name&gt;</code> Creates a new conda environment.<li><code class="language-plaintext highlighter-rouge">conda env list</code> Lists all the conda environments.<li><code class="language-plaintext highlighter-rouge">conda remove -n &lt;name&gt; --all</code> Completely remove an environment.<li><code class="language-plaintext highlighter-rouge">jupyter kernelspec install --user &lt;path&gt;</code> Configure Jupyter kernel using the files in the path.<li><code class="language-plaintext highlighter-rouge">jupyter kernelspec list</code> List the available kernels.<li><code class="language-plaintext highlighter-rouge">jupyter kernelspec uninstall &lt;name&gt;</code> Remove a kernel.</ul><h2 id="python">Python<a href="#python" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Jupyter has the optimal support to python as it is where Jupyter was from. Use the following command to get a python3.9 environment and add kernel to Jupyter:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>conda create <span class="nt">-n</span> python39 <span class="nv">python</span><span class="o">=</span>3.9 <span class="c"># Get an env called 'python39'</span>
<span class="gp">(base)$</span><span class="w"> </span>conda activate python39
<span class="gp">(python39)$</span><span class="w"> </span>conda <span class="nb">install </span>ipykernel
<span class="gp">(python39)$</span><span class="w"> </span>ipython kernel <span class="nb">install</span> <span class="nt">--user</span> <span class="nt">--name</span><span class="o">=</span>python39 <span class="c"># Add the kernel 'python39' for the current user</span>
<span class="gp">(python39)$</span><span class="w"> </span>conda deactivate
</pre></table></code></div></div><p>Then launch Jupyter Hub (see the next section), the kernel ‘python39’ is available on the start-up panel.</p><h2 id="c">C++<a href="#c" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>A popular implementation is <a href="https://xeus-cling.readthedocs.io/en/latest/index.html">Xeus-Cling</a>. ‘Xeus’ is the protocol of Jupyter to implement programming languages and ‘Cling’ is C++ interpreter which enables interactive developing and quick compilation (probably not optimal) of C++ codes. It takes some time to install and compile Cling.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>conda create <span class="nt">-n</span> cpp <span class="c"># Get an env called 'cpp'</span>
<span class="gp">(base)$</span><span class="w"> </span>conda activate cpp
<span class="gp">(cpp)$</span><span class="w"> </span>conda <span class="nb">install </span>xeus-cling <span class="nt">-c</span> conda-forge
<span class="gp">(cpp)$</span><span class="w"> </span>conda deactivate
</pre></table></code></div></div><p>After installation, go back to ‘base’ environment and configure kernel by the kernel setups that come with Xeus-Cling:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>jupyter kernelspec <span class="nb">install</span> <span class="nt">--user</span> path/to/anaconda/envs/cpp/share/jupyter/kernels/xcpp11
<span class="gp">(base)$</span><span class="w"> </span>jupyter kernelspec <span class="nb">install</span> <span class="nt">--user</span> path/to/anaconda/envs/cpp/share/jupyter/kernels/xcpp14
<span class="gp">(base)$</span><span class="w"> </span>jupyter kernelspec <span class="nb">install</span> <span class="nt">--user</span> path/to/anaconda/envs/cpp/share/jupyter/kernels/xcpp17
</pre></table></code></div></div><p>Then launch Jupyter Hub (see the next section), kernels ‘xcpp11’, ‘xcpp14’ and ‘xcpp17’ are available on the start-up panel.</p><h2 id="fortran">FORTRAN<a href="#fortran" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Things with Fortran is always tricky as it is not as popular. The optimal solution that I found is <a href="https://docs.lfortran.org/en/">LFrotran</a> which also follows Xeus protocol. An alternative is the minimalist’s <a href="https://github.com/ZedThree/jupyter-fortran-kernel">jupyter-fortran-kernel</a>.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>conda create <span class="nt">-n</span> fortran <span class="c"># Get an env called 'fortran'</span>
<span class="gp">(base)$</span><span class="w"> </span>conda activate fortran
<span class="gp">(fortran)$</span><span class="w"> </span>conda <span class="nb">install </span>lfortran <span class="nt">-c</span> conda-forge
<span class="gp">(fortran)$</span><span class="w"> </span>conda deactivate
</pre></table></code></div></div><p>Similarly, config fortran kernel in ‘base’ environment:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>jupyter kernelspec <span class="nb">install</span> <span class="nt">--user</span> path/to/anaconda/envs/fortran/share/jupyter/kernels/fortran
</pre></table></code></div></div><p>Then launch Jupyter Hub (see the next section), kernel ‘fortran’ is available on the start-up panel.</p><h1 id="connect-to-the-server">Connect to the server</h1><p>Now the server has already been set up. Use the following command to connect to the server:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span>ssh <span class="nt">-L</span> localhost:1009:localhost:1008 username@serverip
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">-L</code> option specifies the remote (1008) and local (1009) port numbers. The port numbers can be any ones that are not occupied by remote/local processes. The remote one is suggested to be the default port number of Jupyter services. Alternatively, the user can specify the Jupyter Service port when launching it (see below), but that number should be consistent with the remote port specified during logging in.</p><p>Then the connection is set up as usual. Using the following command to launch, for example, Jupyter Notebook:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span><span class="nb">nohup </span>jupyter notebook <span class="nt">--no-browser</span> <span class="nt">--port</span><span class="o">=</span>1008 <span class="o">&gt;</span> /dev/null 2&gt;&amp;1 &amp;
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">nohup</code> hangs up the process in the background to avoid occupying the command line and the normal + error output is redirected to nowhere (<code class="language-plaintext highlighter-rouge">/dev/null</code>). <code class="language-plaintext highlighter-rouge">--no-browser</code> is to prevent the application to open the browser of the server, not needed if <code class="language-plaintext highlighter-rouge">c.NotebookApp.open_browser = False</code>. <code class="language-plaintext highlighter-rouge">--port</code> specifies the remote port, if it is not the default one. Then open the browser in the local machine. Enter the address with local port: <code class="language-plaintext highlighter-rouge">http://localhost:1009</code>. Enter the password (not the token) to use notebook. To shut down Jupyter Notebook, kill the process (<code class="language-plaintext highlighter-rouge">kill -9</code> + PID) by PID. To get process ID, use <code class="language-plaintext highlighter-rouge">ps -ef | grep 'jupyter'</code>.</p><p>Alternatively, when using Jupyter Hub, the <code class="language-plaintext highlighter-rouge">nohup</code> command is unnecessary as the Hub provides access to terminal. However, some key-bindings are covered by Hub, such as <code class="language-plaintext highlighter-rouge">ctrl+c</code> is copy if the text is highlighted, while in Linux it is escaping the current command.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">(base)$</span><span class="w"> </span>jupyter lab <span class="nt">--no-browser</span> <span class="nt">--port</span><span class="o">=</span>1008
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/technique/'>Technique</a>, <a href='/categories/programming/'>programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/anaconda3/" class="post-tag no-text-decoration" >Anaconda3</a> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/tags/windows/" class="post-tag no-text-decoration" >windows</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Set Up a Remote Jupyter Server - Spica. Vir&url=https://spica-vir.github.io/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Set Up a Remote Jupyter Server - Spica. Vir&u=https://spica-vir.github.io/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Set Up a Remote Jupyter Server - Spica. Vir&url=https://spica-vir.github.io/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Structure-and-usage-of-clusters/">Structure and usage of clusters</a><li><a href="/posts/Compile-ONETEP-and-run-quality-tests/">Compile ONETEP and run quality tests</a><li><a href="/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/">Set Up a Remote Jupyter Server</a><li><a href="/posts/LAMMPS-compilation-and-integration-with-Python/">LAMMPS compilation and integration with Python</a><li><a href="/posts/Optimized-Compilation-of-FFTW3/">Optimized compilation of FFTW3</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/regular-inspection/">regular inspection</a> <a class="post-tag" href="/tags/anaconda3/">Anaconda3</a> <a class="post-tag" href="/tags/crystal/">CRYSTAL</a> <a class="post-tag" href="/tags/imperial-rcs/">Imperial RCS</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/cluster/">cluster</a> <a class="post-tag" href="/tags/archer2/">ARCHER2</a> <a class="post-tag" href="/tags/sublime-text-4/">Sublime Text 4</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Create-a-new-environment-in-Anaconda3/"><div class="card-body"> <em class="timeago small" date="2022-01-26 19:52:11 +0000" >Jan 26, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Install Anaconda3 and create a new environment</h3><div class="text-muted small"><p> This post is to summarize the procedures to create an Anaconda python environment in Windows and Linux systems. Tested on Jan. 08, 2022 with Windows 10 21H2, and on Jan. 29, 2022 with Imperial clus...</p></div></div></a></div><div class="card"> <a href="/posts/Setup-the-python-developing-environment-for-Sublime-Text-4/"><div class="card-body"> <em class="timeago small" date="2022-01-23 21:31:10 +0000" >Jan 23, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Setup the python developing environment for Sublime Text 4</h3><div class="text-muted small"><p> In this page my setups of python3 developing environment with Sublime Text 4 text editor are briefly introduced. The following functions are achieved. Setup with Windows 10 21H2, Jan. 9-2022. Py...</p></div></div></a></div><div class="card"> <a href="/posts/Jupyter-Themes/"><div class="card-body"> <em class="timeago small" date="2022-04-01 00:21:09 +0100" >Apr 1, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Install and configure themes for Jupyter Notebook</h3><div class="text-muted small"><p> Jupyter Notebook is a web-based, interactive python developing environment which has been integrated into Anaconda 3. However, it is sometimes annoying especially for long-time users that it has no...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Compile-ONETEP-and-run-quality-tests/" class="btn btn-outline-primary" prompt="Older"><p>Compile ONETEP and run quality tests</p></a> <a href="/posts/How-to-use-Imperial-College-Research-Data-Store-(RDS)/" class="btn btn-outline-primary" prompt="Newer"><p>How to use Imperial College Research Data Store (RDS)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/Spica-Vir">Spica.Vir</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/regular-inspection/">regular inspection</a> <a class="post-tag" href="/tags/anaconda3/">Anaconda3</a> <a class="post-tag" href="/tags/crystal/">CRYSTAL</a> <a class="post-tag" href="/tags/imperial-rcs/">Imperial RCS</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/cluster/">cluster</a> <a class="post-tag" href="/tags/archer2/">ARCHER2</a> <a class="post-tag" href="/tags/sublime-text-4/">Sublime Text 4</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
