<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Structure and usage of clusters" /><meta property="og:locale" content="en" /><meta name="description" content="This page is adapted from my Crystal Growth project notebook with added contents, which was written between Feb. and Mar. 2022 and shared within the group for induction and training proposes. Both this page and the notebook are under regular inspection, but their contents are not synced." /><meta property="og:description" content="This page is adapted from my Crystal Growth project notebook with added contents, which was written between Feb. and Mar. 2022 and shared within the group for induction and training proposes. Both this page and the notebook are under regular inspection, but their contents are not synced." /><link rel="canonical" href="https://spica-vir.github.io/posts/Structure-and-usage-of-clusters/" /><meta property="og:url" content="https://spica-vir.github.io/posts/Structure-and-usage-of-clusters/" /><meta property="og:site_name" content="Spica. Vir" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-04-06T16:59:03+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Structure and usage of clusters" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-04-20T21:53:38+01:00","datePublished":"2022-04-06T16:59:03+01:00","description":"This page is adapted from my Crystal Growth project notebook with added contents, which was written between Feb. and Mar. 2022 and shared within the group for induction and training proposes. Both this page and the notebook are under regular inspection, but their contents are not synced.","headline":"Structure and usage of clusters","mainEntityOfPage":{"@type":"WebPage","@id":"https://spica-vir.github.io/posts/Structure-and-usage-of-clusters/"},"url":"https://spica-vir.github.io/posts/Structure-and-usage-of-clusters/"}</script><title>Structure and usage of clusters | Spica. Vir</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Spica. Vir"><meta name="application-name" content="Spica. Vir"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://cdn.jsdelivr.net/gh/spica-vir/spica-vir.github.io/images//avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Spica. Vir</a></div><div class="site-subtitle font-italic">Research, techniques and interests</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Spica-Vir" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="" aria-label="" target="_blank" rel="noopener"> <i class=""></i> </a> <a href=" javascript:location.href = 'mailto:' + ['spica.h.zhou','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="" aria-label="" target="_blank" rel="noopener"> <i class=""></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Structure and usage of clusters</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Structure and usage of clusters</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/Spica-Vir">Spica.Vir</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-04-06 16:59:03 +0100" data-toggle="tooltip" data-placement="bottom" title="Wed, Apr 6, 2022, 4:59 PM +0100" >Apr 6, 2022</em> </span> <span> Updated <em class="timeago" date="2024-04-20 21:53:38 +0100 " data-toggle="tooltip" data-placement="bottom" title="Sat, Apr 20, 2024, 9:53 PM +0100" >Apr 20</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1890 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><p>This page is adapted from my Crystal Growth project notebook with added contents, which was written between Feb. and Mar. 2022 and shared within the group for induction and training proposes. Both this page and the notebook are under regular inspection, but their contents are not synced.</p><h1 id="divide-a-job-nodes-processors-and-threads">Divide a job: Nodes, Processors and Threads</h1><p><strong>Node</strong>: A bunch of CPUs and probably with GPUs / coprocessors for acceleration. Memory and input files are shared by processors in the same node, so a node can be considered as an independent computer. The communication between nodes are achieved by ultra-fast network, which is the bottleneck of modern clusters.</p><p><strong>Processor</strong>: The unit to deal with a ‘process’, also known as ‘central processing unit’, or CPU. Processors in the same node communicate via shared memory.</p><p><strong>Thread</strong>: Subdivision of a process. Multiple threads in the same process share the resources allocated to the CPU.</p><p>The figure below illustrates the hierarchy of node, processor, and thread:</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 700 428'%3E%3C/svg%3E" data-src="https://cdn.jsdelivr.net/gh/spica-vir/spica-vir.github.io/images//220406-1.png" alt="Hierarchy of computing units" width="700" height="428" data-proofer-ignore></p><h2 id="multiple-processes-vs-multiple-threads">Multiple processes vs multiple threads<a href="#multiple-processes-vs-multiple-threads" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>From the figure above, it is not difficult to distinguish the differences between a ‘process’ and a ‘thread’: process is the smallest unit for resource allocation; thread is part of a process. The idea of ‘thread’ is introduced to address the huge difference in the speed of CPU and RAM. CPU is always several orders of magnitude faster than RAM, so typically the bottleneck of a process is loading the required environment from RAM, rather than computations in CPU. By using multiple threads in the same process, various branches of the same program can be executed simultaneously. Therefore, the shared environmental requirements doesn’t need to be read from RAM for multiple times, and the loading time for threads is much smaller than for processes.</p><p>However, multithreading is not always advantageous. A technical prerequisite is that the program should be developed for multithread proposes. Python, for example, is a pseudo-multithread language, while Java is a real one. Sometimes multithreading can lead to catastrophic results. Since threads share the same resource allocation (CPU, RAM, I/O, etc.), when a thread fails, the whole process fails as well. Comparatively, in multiple processes, other processes will be protected if a process fails.</p><p>In practice, users can either run each process in serial (i.e., number of threads = 1), or in parallel (i.e., number of threads &gt; 1) on clusters. However, <strong>the former is recommended</strong>, because of more secured resource managements. The latter is not advantageous. Besides the problem mentioned above, it might lead to problems such as memory leak when running programs either: not developed for multithreading / requires improper packages (See the famous <a href="https://docs.archer2.ac.uk/known-issues/#oom-due-to-memory-leak-in-libfabric-added-2022-02-23">libfabric issue</a> on ARCHER2) - common problems of scientific computing packages &amp; their users. :-)</p><h2 id="more-nodes-vs-more-cpus">More nodes vs more CPUs<a href="#more-nodes-vs-more-cpus" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>When the allocated memory permits, from my experience, using more CPUs/processes per node is usually a better idea, considering that all nodes have independent memory space and the inter-node communications are achieved by wired networks. It almost always takes longer to coordinate nodes than to coordinate processors within the same node.</p><h1 id="the-internal-coordinator-what-is-mpi">The internal coordinator: What is MPI</h1><p>Message passing interface, or MPI, is a standard for communicating and transferring data between nodes and therefore distributed memories. It is utilized via MPI libraries. The most popular implementations include:</p><ul><li><a href="https://www.mpich.org/">MPICH</a> - an open-source library;<li><a href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/mpi-library.html#gs.xld8oa">Intel MPI</a> - a popular implementation of MPICH especially optimised for Intel CPUs;<li><a href="https://www.open-mpi.org/">OpenMPI</a> - an open-source library;<li><a href="https://www.openmp.org/">OpenMP</a> - Not MPI; parallelization based on shared memory, so only implemented in a single node; can be used for multithreading;</ul><p>In practice, a hybrid parallelization combining MPI and OpenMP to run multithread jobs on cluster is allowed, though sometimes not recommended. The first process (probably not a node or a processor) is usually allocated for I/O, and the rest is used for parallel computing.</p><p>So far, MPI only supports C/C++ and FORTRAN, which explains why all parallel computing software is based on these languages. To launch an executable in parallel, one should specify: <code class="language-plaintext highlighter-rouge">mpiexec</code> or <code class="language-plaintext highlighter-rouge">mpirun</code>.</p><p>Technical details about how MPI is implemented is too advanced for typical computational chemists / solid state physicists, which is a specific, completely different research area, so they are not covered in this page.</p><h1 id="distribute-files-the-role-of-job-submission-scripts">Distribute files: The role of job submission scripts</h1><p>As mentioned in previous sections, memories are distributed to nodes. Considering the inefficiency of inter-node communication, it is unpractical to frequently transfer files across nodes. In practice, required input files are duplicated, or synced, to all the nodes before any calculation. During the calculation, data is transferred from computing nodes between the I/O node.</p><p>Although such sync is automatic for almost any modern cluster, it is safer to specify that when developing job submission scripts:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span>ssh <span class="k">${</span><span class="nv">NODEADDRESS</span><span class="k">}</span> <span class="s2">"</span><span class="k">${</span><span class="nv">COMMAND</span><span class="k">}</span><span class="s2">"</span>
</pre></table></code></div></div><h1 id="secure-your-storage-work-directory-and-home-directory">Secure your storage: Work directory and home directory</h1><p>All the modern clusters have separate disk spaces for differently proposes, namely, work directory and home directory. This originates again from the famous speed difference between CPU and RAM/ROM. 2 distinctly kinds of disks are used respectively to improve the overall efficiency and secure important data:</p><ul><li>For work directory, large, high-frequency disks are used. Data stored in work directory is usually not backed up, and in some cases, will be automatically cleaned after a fixed time length.<li>For home directory, mechanical disks with slower read/write frequency but better robustness are used. Usually files in home space are backed up.</ul><p>For large clusters like ARCHER2, the work directory and the home directory are completely separated, i.e., directory is only viable by login nodes; work directory is viable by both job and login nodes. Job submission in home directory is prohibited.</p><p>For more flexible, medium-sized clusters like Imperial CX1, submitting jobs in home directory and visiting home directory by job nodes are allowed, yet storing temporary files during calculation in home directory is still not recommended because of the potential influence on other files and the reduced overall efficiency. Work and home directories can be called with the following environmental variables:</p><p><code class="language-plaintext highlighter-rouge">${EPHEMERAL}</code> - Work directory. Data will be cleaned over 30 days.<br /> <code class="language-plaintext highlighter-rouge">${HOME}</code> - Home directory.</p><h1 id="setup-your-environment-what-does-an-application-need">Setup your environment: What does an application need?</h1><p><strong>Executable</strong><br /> The binary executable should, theoretically, all be stored in <code class="language-plaintext highlighter-rouge">\usr\bin</code>. This never happens in practice, unless you are a fanatical fundamentalist of the early Linux releases. To guide your system to the desired executable, you can either laboriously type its absolute path every time you need it or add the path to the environmental variable:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">PATH</span><span class="k">}</span>:path_to_bin
</pre></table></code></div></div><p>Running any executable in parallel requires mpi to coordinate all the processes/threads. The path to mpi executable is also required. Besides, many scientific codes require other specific environmental variables such as linear algebra packages. Read their documentations for further information.</p><p><strong>lib/a/o files</strong><br /> When writing a script, you might need some extra packages to do more complex jobs. Those packages are developed by experts in computer science and can be called by a line of code. The same thing happens when people were developing applications like CRYSTAL and ONETEP.</p><p>However, scientific computing codes are usually distributed in the form of source code. Source codes in FORTRAN/C/C++ need be compiled into a binary executable. There are 2 options during compiling:</p><ol><li>Include the whole package as long as one of its functions is called, also known as a ‘static lib’.<li>Only include a ‘table of contents’ when compiling, also known as ‘dynamic lib’. The packages needed are separately stored in ‘dll/so’ files, making it possible for multiple applications sharing the same lib.</ol><p>Details about compilation are beyond the scope of this post. Maybe I will make another post to discuss them, when I am more confident with this topic. The thing is: when running a dynamically linked application, information should be given to help the code find the libs needed. This can be specified by:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="k">}</span>:path_to_lib<span class="sb">`</span>
</pre></table></code></div></div><p>For statically linked applications, usually you need not worry about it - but the volume of the compiled executable might make you feel wonder whether there is an alternative way.</p><p><strong>Conflicts</strong><br /> Improper previous settings may lead to a wrong application, or a wrong version, if multiple applications with similar functions are installed in the system, such as Intel compiler and GCC, OpenMPI and MPICH - a common phenomenon for shared computing resources. To avoid this, the path to the undesired application or lib should be removed from the environmental variables.</p><p><strong>Environmental Modules</strong><br /> <a href="http://modules.sourceforge.net/">Environmental modules</a> is a popular software managing the necessary environmental setups and conflicts for each application. It can easily add or erase the environmental variables by commands <code class="language-plaintext highlighter-rouge">module load</code> or <code class="language-plaintext highlighter-rouge">module rm</code>, and modulefiles written in Tool Command Language (TCL). The default directory of modulefiles is given in the environmental variable <code class="language-plaintext highlighter-rouge">${MODULEPATH}</code>, but files in other directories can also be loaded by their absolute path.</p><p>Both Imperial CX1 and ARCHER2 adopt this application, which pre-compiled applications offered.</p><h1 id="the-external-coordinator-what-is-a-batch-system">The external coordinator: What is a batch system</h1><p>Always bear in mind that the computational resources are limited, so you need to acquire reasonable resources for your job. Besides, the cluster also needs to calculate your budget, coordinate jobs submitted by various users, and make the best of available resources. When job is running, maybe you also want to check its status. All of this are fulfilled by batch systems.</p><p>In practice, a Linux shell script is needed. Parameters of the batch system of are set in the commented lines at the top of the file. After the user submit the script to batch system, the system will:</p><ol><li>Examine the parameters<li>Allocate and coordinate the requested resources<li>Set up the environments, such as environmental variables, package dependency, and sync the same setting to all nodes<li>Launch a parallel calculation - see mpi part<li>Post-process</ol><p>Note that a ‘walltime’ is usually required for a batch job, i.e., the maximum allowed time for the running job. The job will be ‘killed’, or suspended, when the time exceeds the walltime, and the rest part of the script will not be executed. <code class="language-plaintext highlighter-rouge">timeout</code> command can be used to set another walltime for a specific command.</p><p>Common batch systems include <a href="https://en.wikipedia.org/wiki/Portable_Batch_System">PBS</a>, which involves different releases, and <a href="https://slurm.schedmd.com/overview.html">Slurm</a>. For Imperial cluster CX1 and MMM Hub Young (managed by UCL), PBS system is implemented; for ARCHER2 and Tianhe-2 LvLiang(天河二号-吕梁), Slurm is implemented. Tutorials of batch systems are not covered here, since they are highly machine-dependent - usually modifications are made to enhance the efficiency. Refer to the specific user documentations for more information.</p><h1 id="how-to-run-a-job-in-parallel-things-to-consider">How to run a job in parallel: Things to consider</h1><p>Successfully setting and submitting a batch job script symbolizes that you do not need this tutorial any more. Before being able to do that, some considerations might be important:</p><ul><li>How large is my system? Is it efficient to use the resources I requested(Note that it is not a linear-scaling problem… Refer to <a href="https://tutorials.crystalsolutions.eu/tutorial.html?td=tuto_HPC&amp;tf=tuto_hpc#scale">this test</a> on CRYSTAL17)?<li>To which queue should I submit my job? Is it too long/not applicable/not available?<li>Is it safe to use multi-threading?<li>Is it memory,GPU etc. demanding?<li>Roughly how long will it take?<li>What is my budget code? Do I have enough resources?<li>Which MPI release version is my code compatible with? Should I load a module or set variables?<li>Any other specific environmental setups does my code need?<li>Do I have any post-processing script after MPI part is finished? How long does it take?</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/technique/'>Technique</a>, <a href='/categories/parallel-computing/'>Parallel Computing</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cluster/" class="post-tag no-text-decoration" >cluster</a> <a href="/tags/imperial-rcs/" class="post-tag no-text-decoration" >Imperial RCS</a> <a href="/tags/archer2/" class="post-tag no-text-decoration" >ARCHER2</a> <a href="/tags/regular-inspection/" class="post-tag no-text-decoration" >regular inspection</a> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Structure and usage of clusters - Spica. Vir&url=https://spica-vir.github.io/posts/Structure-and-usage-of-clusters/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Structure and usage of clusters - Spica. Vir&u=https://spica-vir.github.io/posts/Structure-and-usage-of-clusters/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Structure and usage of clusters - Spica. Vir&url=https://spica-vir.github.io/posts/Structure-and-usage-of-clusters/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Structure-and-usage-of-clusters/">Structure and usage of clusters</a><li><a href="/posts/Compile-ONETEP-and-run-quality-tests/">Compile ONETEP and run quality tests</a><li><a href="/posts/Launch-Jupyter-Notebook-from-a-Remote-Server/">Set Up a Remote Jupyter Server</a><li><a href="/posts/LAMMPS-compilation-and-integration-with-Python/">LAMMPS compilation and integration with Python</a><li><a href="/posts/Optimized-Compilation-of-FFTW3/">Optimized compilation of FFTW3</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/regular-inspection/">regular inspection</a> <a class="post-tag" href="/tags/anaconda3/">Anaconda3</a> <a class="post-tag" href="/tags/crystal/">CRYSTAL</a> <a class="post-tag" href="/tags/imperial-rcs/">Imperial RCS</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/cluster/">cluster</a> <a class="post-tag" href="/tags/archer2/">ARCHER2</a> <a class="post-tag" href="/tags/sublime-text-4/">Sublime Text 4</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Connect-to-the-Imperial-Cluster/"><div class="card-body"> <em class="timeago small" date="2022-01-11 20:07:53 +0000" >Jan 11, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Connect to the Imperial Cluster</h3><div class="text-muted small"><p> This page is to show how to set up the connection to Imperial cluster for the research computing services (RCS) and its usage. Contents of this page are regularly inspected. N.B. MAKE SURE YOU HAV...</p></div></div></a></div><div class="card"> <a href="/posts/ARCHER2-Connection-and-basic-commands/"><div class="card-body"> <em class="timeago small" date="2022-01-14 22:00:08 +0000" >Jan 14, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ARCHER2:Connection and basic commands</h3><div class="text-muted small"><p> This page is to briefly summarize the connection and usage of the UK national supercomputing service, ARCHER2. N.B. MAKE SURE YOU HAVE BEEN AUTHORIZED TO DO SO. Please note this page is not an off...</p></div></div></a></div><div class="card"> <a href="/posts/How-to-use-Imperial-College-Research-Data-Store-(RDS)/"><div class="card-body"> <em class="timeago small" date="2022-10-05 20:57:04 +0100" >Oct 5, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to use Imperial College Research Data Store (RDS)</h3><div class="text-muted small"><p> In this post, necessary tutorials are collected and the step-by-step guides are provided for setting up connections to Imperial College Research Data Store (RDS) services on Linux (OpenSUSE) and Wi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Common-symbol-names-in-English/" class="btn btn-outline-primary" prompt="Older"><p>Common symbol names in English</p></a> <a href="/posts/Compile-ONETEP-and-run-quality-tests/" class="btn btn-outline-primary" prompt="Newer"><p>Compile ONETEP and run quality tests</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/Spica-Vir">Spica.Vir</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/regular-inspection/">regular inspection</a> <a class="post-tag" href="/tags/anaconda3/">Anaconda3</a> <a class="post-tag" href="/tags/crystal/">CRYSTAL</a> <a class="post-tag" href="/tags/imperial-rcs/">Imperial RCS</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/cluster/">cluster</a> <a class="post-tag" href="/tags/archer2/">ARCHER2</a> <a class="post-tag" href="/tags/sublime-text-4/">Sublime Text 4</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
